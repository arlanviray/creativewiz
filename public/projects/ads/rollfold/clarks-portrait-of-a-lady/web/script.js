/**
 * @author: Arlan Viray
 * @email: arlanv555@gmail.com
 */
!function(e,o,n){function c(){i(),e(".expanded .blockinfo .blockitem1 .carousel .item").eq(0).clone().appendTo(".expanded .blockinfo .blockitem1 .carousel"),e(".expanded .blockinfo .blockitem1 .carousel .item").eq(h-1).clone().prependTo(".expanded .blockinfo .blockitem1 .carousel"),e(".expanded .blockinfo .blockitem2 .carousel .item").eq(0).clone().appendTo(".expanded .blockinfo .blockitem2 .carousel"),e(".expanded .blockinfo .blockitem2 .carousel .item").eq(h-1).clone().prependTo(".expanded .blockinfo .blockitem2 .carousel"),e(".expanded .blockinfo .blockitem3 .carousel .item").eq(0).clone().appendTo(".expanded .blockinfo .blockitem3 .carousel"),e(".expanded .blockinfo .blockitem3 .carousel .item").eq(h-1).clone().prependTo(".expanded .blockinfo .blockitem3 .carousel"),// mouse events
e(".contracted").click(t),e(".expanded .row2 .column").hover(function(){TweenMax.to(e(this).find("img"),g,{opacity:.5})},function(){TweenMax.to(e(this).find("img"),g,{opacity:1})}).click(function(){I&&(q=!0,M=e(this).index()+1,TweenMax.to(e(this).find("img"),0,{opacity:1}),b(),k(),f(!0))}),e(".expanded .blockinfo .blockitem .carousel .item").hover(function(){TweenMax.to(e(this).find("img"),g,{opacity:.5}),TweenMax.to(e(this).find(".info"),g,{css:{display:"block",opacity:1}})},function(){TweenMax.to(e(this).find("img"),g,{opacity:1}),TweenMax.to(e(this).find(".info"),g,{css:{display:"none",opacity:0}})}),e(".btnInfos .back").click(function(){TweenMax.isTweening(e(".expanded .row2 .column"))||w()}),e(".btnInfos .prev").click(function(){TweenMax.isTweening(e(".expanded .row2 .column"))||(M>0&&M--,f())}),e(".btnInfos .next").click(function(){TweenMax.isTweening(e(".expanded .row2 .column"))||(h+1>M&&M++,f())}),e(".btnClose").hover(function(){TweenMax.to(e(this).find("img"),C,{rotation:90})},function(){TweenMax.to(e(this).find("img"),C,{rotation:0})}).click(function(){TweenMax.isTweening(e(".expanded .row2 .column"))||(e(this).hide(),q?w():p())})}function t(){ADTECH.expand(),clearInterval(y),l()}function a(){ADTECH.contract(),e(".expanded").fadeOut("slow",function(){i(),I=!1}),e(".contracted").find("img").css({opacity:0}),e(".contracted").find("img.i"+M).css({opacity:1}),e(".contracted").fadeIn()}function i(){y=setInterval(function(){d()},3e3)}function d(){M==h?M=1:M+=1,TweenMax.to(e(".contracted").find("img"),g,{css:{opacity:0}}),TweenMax.to(e(".contracted").find("img.i"+M),g,{css:{opacity:1}})}function l(){b(),e(".expanded").fadeIn(),e(".contracted").fadeOut("slow",function(){s(!0)})}function s(o){o?(TweenMax.to(".expanded .row2",C,{css:{top:600}}),TweenMax.to([".expanded .row1 .col1",".expanded .row1 .col2",".expanded .row2 .col1",".expanded .row2 .col2"],C,{css:{left:300},delay:C}),TweenMax.to([".expanded .row1 .col1",".expanded .row2 .col1"],C,{css:{left:0},delay:2*C}),TweenMax.to(".expanded .blockcopy",C,{css:{display:"block",opacity:1,top:360},delay:3*C,onComplete:function(){I=!0,e(".btnClose").show()}})):(TweenMax.to(".expanded .row2",C,{css:{top:0},delay:3*C,onComplete:a}),TweenMax.to([".expanded .row1 .col1",".expanded .row1 .col2",".expanded .row2 .col1",".expanded .row2 .col2"],C,{css:{left:600},delay:2*C}),TweenMax.to([".expanded .row1 .col1",".expanded .row2 .col1"],C,{css:{left:300},delay:C}),TweenMax.to(".expanded .blockcopy",C,{css:{display:"none",opacity:0,top:380}}))}function p(){e(".btnClose").is(":hidden")&&s()}function x(e){if(e)TweenMax.to(".expanded .row2 .column",C,{css:{left:300,width:600,height:1200}}),TweenMax.to(".expanded .row2 .column img",C,{css:{width:599,height:1200}}),TweenMax.to(".expanded .blockinfo",C,{css:{left:0},delay:C,onComplete:m});else{var o;switch(M){case 1:o=0;break;case 2:o=300;break;case 3:o=600}TweenMax.to(".expanded .row2 .column",C,{css:{left:o,width:300,height:600},delay:C,onComplete:k}),TweenMax.to(".expanded .row2 .column img",C,{css:{width:299,height:600},delay:C}),TweenMax.to(".expanded .blockinfo",C,{css:{left:-300}})}}function w(){q=!1,x(),T()}function f(o){// carousel
TweenMax.to(".blockinfo .blockitem1 .carousel",o?0:C,{css:{top:-(600*M)},onComplete:function(){o||(0==M&&(M=h),M==h+1&&(M=1),TweenMax.to(".blockinfo .blockitem1 .carousel",0,{css:{top:-(600*M)}}))}}),TweenMax.to(".blockinfo .blockitem2 .carousel",o?0:C,{css:{left:-r()},onComplete:function(){o||(0==M&&(M=h),M==h+1&&(M=1),TweenMax.to(".blockinfo .blockitem2 .carousel",0,{css:{left:-r()}}))}}),TweenMax.to(".blockinfo .blockitem3 .carousel",o?0:C,{css:{left:-(300*M)},onComplete:function(){o||(0==M&&(M=h),M==h+1&&(M=1),TweenMax.to(".blockinfo .blockitem3 .carousel",0,{css:{left:-(300*M)}}))}}),// main image
o||(// set all opacity to zero
TweenMax.to(e(".expanded .row2 .column"),C,{css:{opacity:0}}),// set current column opacity
TweenMax.to(e(".expanded .row2 .col"+u()),C,{css:{opacity:1},onComplete:function(){// reset all columns
e(".expanded .row2 .column").css({opacity:1}),b()}}))}function r(){var e;switch(M){case 0:e=1200;break;case 1:e=900;break;case 2:e=600;break;case 3:e=300;break;case 4:e=0}return e}function u(){var e;return e=0==M?3:4==M?1:M}function m(){e(".btnInfos").show()}function T(){e(".btnInfos").hide()}function b(){e(".expanded .row2 .column").css({"z-index":""}),e(".expanded .row2 .col"+u()).css({"z-index":1})}function k(){switch(q?(TweenMax.to(e(".expanded .row2"),C,{css:{top:0,height:1200}}),e(".expanded .row2 .column").css({"pointer-events":"none"})):TweenMax.delayedCall(.5,function(){TweenMax.to(e(".expanded .row2"),C,{css:{top:600,height:600}}),e(".expanded .row2 .column").css({"pointer-events":""})}),M){case 1:q?TweenMax.to([".expanded .row2 .col2",".expanded .row2 .col3"],C,{css:{left:0},onComplete:function(){x(!0)}}):(TweenMax.to(".expanded .row2 .col2",C,{css:{left:300}}),TweenMax.to(".expanded .row2 .col3",C,{css:{left:600},onComplete:p}));break;case 2:q?TweenMax.to([".expanded .row2 .col1",".expanded .row2 .col3"],C,{css:{left:300},onComplete:function(){x(!0)}}):(TweenMax.to(".expanded .row2 .col1",C,{css:{left:0}}),TweenMax.to(".expanded .row2 .col3",C,{css:{left:600},onComplete:p}));break;case 3:q?TweenMax.to([".expanded .row2 .col1",".expanded .row2 .col2"],C,{css:{left:600},onComplete:function(){x(!0)}}):(TweenMax.to(".expanded .row2 .col1",C,{css:{left:0}}),TweenMax.to(".expanded .row2 .col2",C,{css:{left:300},onComplete:p}))}}var M=1,h=3,y,g=.5,C=.25,v=new TimelineMax({paused:!0,onReverseComplete:function(){},onComplete:function(){}}),I=!1,q=!1;e(c)}(jQuery,window);