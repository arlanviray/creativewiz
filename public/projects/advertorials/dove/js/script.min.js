/** 
 * @uathor: Arlan Viray
 * @email: arlanv555@gmail.com
 * Dove - v1.0.0 - 2014-08-06
 * Copyright (c) 2014
 */
function base64_decode(a){var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=0,l=0,m="",n=[];if(!a)return a;a+="";do e=j.indexOf(a.charAt(k++)),f=j.indexOf(a.charAt(k++)),g=j.indexOf(a.charAt(k++)),h=j.indexOf(a.charAt(k++)),i=e<<18|f<<12|g<<6|h,b=i>>16&255,c=i>>8&255,d=255&i,n[l++]=64==g?String.fromCharCode(b):64==h?String.fromCharCode(b,c):String.fromCharCode(b,c,d);while(k<a.length);return m=n.join(""),decodeURIComponent(escape(m.replace(/\0+$/,"")))}function base64_encode(a){var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=0,l=0,m="",n=[];if(!a)return a;a=unescape(encodeURIComponent(a));do b=a.charCodeAt(k++),c=a.charCodeAt(k++),d=a.charCodeAt(k++),i=b<<16|c<<8|d,e=i>>18&63,f=i>>12&63,g=i>>6&63,h=63&i,n[l++]=j.charAt(e)+j.charAt(f)+j.charAt(g)+j.charAt(h);while(k<a.length);m=n.join("");var o=a.length%3;return(o?m.slice(0,o-3):m)+"===".slice(o||3)}function makeImagesResponsive(){var a=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,b=document.getElementsByTagName("body")[0].getElementsByTagName("img");if(0!==b.length){var c;c=b[0].hasAttribute?function(a,b){return a.hasAttribute(b)}:function(a,b){return null!==a.getAttribute(b)};for(var d=window.devicePixelRatio&&window.devicePixelRatio>=1.2?1:0,e=0;e<b.length;e++){var f=b[e],g=d&&c(f,"data-src2x")?"data-src2x":"data-src",h=d&&c(f,"data-src-base2x")?"data-src-base2x":"data-src-base";if(c(f,g))for(var i=c(f,h)?f.getAttribute(h):"",j=f.getAttribute(g),k=j.split(","),l=0;l<k.length;l++){var m,n,o=k[l].replace(":","||").split("||"),p=o[0],q=o[1];if(-1!==p.indexOf("<"))if(m=p.split("<"),k[l-1]){var r=k[l-1].split(/:(.+)/),s=r[0].split("<");n=a<=m[1]&&a>s[1]}else n=a<=m[1];else if(m=p.split(">"),k[l+1]){var t=k[l+1].split(/:(.+)/),u=t[0].split(">");n=a>=m[1]&&a<u[1]}else n=a>=m[1];if(n){var v,w=-1!==q.indexOf("//")?1:0;v=1===w?q:i+q,f.src!==v&&f.setAttribute("src",v);break}}}}}!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}}),function(a,b){function c(){a.removeEventListener("load",c,!1),g=!0}function d(a){return h=h||new d.Class(a)}function e(a,b){for(var c in b)a[c]=b[c];return a}function f(){"#ath"==b.location.hash&&history.replaceState("",a.document.title,b.location.href.split("#")[0]),i.test(b.location.href)&&history.replaceState("",a.document.title,b.location.href.replace(i,"$1")),j.test(b.location.search)&&history.replaceState("",a.document.title,b.location.href.replace(j,"$2"))}var g=!1;a.addEventListener("load",c,!1);var h,i=/\/ath(\/)?$/,j=/([\?&]ath=[^&]*$|&ath=[^&]*(&))/;d.intl={en_us:{message:"To add this web app to the home screen: tap %icon and then <strong>%action</strong>.",action:{ios:"Add to Home Screen",android:"Add to homescreen",windows:"pin to start"}},it_it:{message:"Per Aggiungere questa web app alla schermata iniziale: premi %icon e poi <strong>%action</strong>.",action:{ios:"Aggiungi a Home",android:"Aggiungi alla homescreen",windows:"pin to start"}}},d.defaults={appID:"org.cubiq.addtohome",fontSize:15,debug:!1,modal:!1,mandatory:!1,autostart:!0,skipFirstVisit:!1,startDelay:1,lifespan:15,displayPace:1440,maxDisplayCount:0,icon:!0,message:"",validLocation:[],onInit:null,onShow:null,onRemove:null,onAdd:null,onPrivate:null,detectHomescreen:!1};var k=a.navigator.userAgent,l=a.navigator;e(d,{hasToken:"#ath"==b.location.hash||i.test(b.location.href)||j.test(b.location.search),isRetina:a.devicePixelRatio&&a.devicePixelRatio>1,isIDevice:/iphone|ipod|ipad/i.test(k),isMobileChrome:k.indexOf("Android")>-1&&/Chrome\/[.0-9]*/.test(k),isMobileIE:k.indexOf("Windows Phone")>-1,language:l.language&&l.language.toLowerCase().replace("-","_")}),d.isMobileSafari=d.isIDevice&&k.indexOf("Safari")>-1&&k.indexOf("CriOS")<0,d.OS=d.isIDevice?"ios":d.isMobileChrome?"android":d.isMobileIE?"windows":"unsupported",d.OSVersion=k.match(/(OS|Android) (\d+[_\.]\d+)/),d.OSVersion=d.OSVersion&&d.OSVersion[2]?+d.OSVersion[2].replace("_","."):0,d.isStandalone=a.navigator.standalone||d.isMobileChrome&&screen.height-b.documentElement.clientHeight<40,d.isTablet=d.isMobileSafari&&k.indexOf("iPad")>-1||d.isMobileChrome&&k.indexOf("Mobile")<0,d.isCompatible=d.isIDevice&&d.OSVersion>=6||d.isMobileChrome,d.language=d.language&&d.language in d.intl?d.language:"en_us";var m={lastDisplayTime:0,returningVisitor:!1,displayCount:0,optedout:!1,added:!1};d.removeSession=function(a){try{localStorage.removeItem(a||d.defaults.appID)}catch(b){}},d.Class=function(c){if(this.options=e({},d.defaults),e(this.options,c),this.options.mandatory=this.options.mandatory&&("standalone"in a.navigator||this.options.debug),this.options.modal=this.options.modal||this.options.mandatory,this.options.mandatory&&(this.options.startDelay=-.5),this.options.detectHomescreen=this.options.detectHomescreen===!0?"hash":this.options.detectHomescreen,this.options.debug&&(d.isCompatible=!0,d.OS="string"==typeof this.options.debug?this.options.debug:"unsupported"==d.OS?"android":d.OS,d.OSVersion="ios"==d.OS?"7":"4"),this.container=b.documentElement,this.session=JSON.parse(localStorage.getItem(this.options.appID)),!d.hasToken||d.isCompatible&&this.session||(d.hasToken=!1,f()),d.isCompatible){this.session=this.session||m;try{localStorage.setItem(this.options.appID,JSON.stringify(this.session)),d.hasLocalStorage=!0}catch(g){d.hasLocalStorage=!1,this.options.onPrivate&&this.options.onPrivate.call(this)}for(var h=!this.options.validLocation.length,i=this.options.validLocation.length;i--;)if(this.options.validLocation[i].test(b.location.href)){h=!0;break}if(localStorage.getItem("addToHome")&&this.optOut(),!this.session.optedout&&!this.session.added&&h){if(d.isStandalone)return void(this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&d.hasLocalStorage&&this.options.onAdd.call(this)));if(this.options.detectHomescreen){if(d.hasToken)return f(),void(this.session.added||(this.session.added=!0,this.updateSession(),this.options.onAdd&&d.hasLocalStorage&&this.options.onAdd.call(this)));"hash"==this.options.detectHomescreen?history.replaceState("",a.document.title,b.location.href+"#ath"):"smartURL"==this.options.detectHomescreen?history.replaceState("",a.document.title,b.location.href.replace(/(\/)?$/,"/ath$1")):history.replaceState("",a.document.title,b.location.href+(b.location.search?"&":"?")+"ath=")}(this.session.returningVisitor||(this.session.returningVisitor=!0,this.updateSession(),!this.options.skipFirstVisit))&&d.hasLocalStorage&&(this.ready=!0,this.options.onInit&&this.options.onInit.call(this),this.options.autostart&&this.show())}}},d.Class.prototype={events:{load:"_delayedShow",error:"_delayedShow",orientationchange:"resize",resize:"resize",scroll:"resize",click:"remove",touchmove:"_preventDefault",transitionend:"_removeElements",webkitTransitionEnd:"_removeElements",MSTransitionEnd:"_removeElements"},handleEvent:function(a){var b=this.events[a.type];b&&this[b](a)},show:function(c){if(this.options.autostart&&!g)return void setTimeout(this.show.bind(this),50);if(!this.shown){var e=Date.now(),f=this.session.lastDisplayTime;if(c!==!0){if(!this.ready)return;if(e-f<6e4*this.options.displayPace)return;if(this.options.maxDisplayCount&&this.session.displayCount>=this.options.maxDisplayCount)return}this.shown=!0,this.session.lastDisplayTime=e,this.session.displayCount++,this.updateSession(),this.applicationIcon||(this.applicationIcon=b.querySelector("ios"==d.OS?'head link[rel^=apple-touch-icon][sizes="152x152"],head link[rel^=apple-touch-icon][sizes="144x144"],head link[rel^=apple-touch-icon][sizes="120x120"],head link[rel^=apple-touch-icon][sizes="114x114"],head link[rel^=apple-touch-icon]':'head link[rel^="shortcut icon"][sizes="196x196"],head link[rel^=apple-touch-icon]'));var h="";h=this.options.message in d.intl?d.intl[this.options.message].message.replace("%action",d.intl[this.options.message].action[d.OS]):""!==this.options.message?this.options.message:d.intl[d.language].message.replace("%action",d.intl[d.language].action[d.OS]),h="<p>"+h.replace("%icon",'<span class="ath-action-icon">icon</span>')+"</p>",this.viewport=b.createElement("div"),this.viewport.className="ath-viewport",this.options.modal&&(this.viewport.className+=" ath-modal"),this.options.mandatory&&(this.viewport.className+=" ath-mandatory"),this.viewport.style.position="absolute",this.element=b.createElement("div"),this.element.className="ath-container ath-"+d.OS+" ath-"+d.OS+(d.OSVersion+"").substr(0,1)+" ath-"+(d.isTablet?"tablet":"phone"),this.element.style.cssText="-webkit-transition-property:-webkit-transform,opacity;-webkit-transition-duration:0;-webkit-transform:translate3d(0,0,0);transition-property:transform,opacity;transition-duration:0;transform:translate3d(0,0,0);-webkit-transition-timing-function:ease-out",this.element.style.webkitTransform="translate3d(0,-"+a.innerHeight+"px,0)",this.element.style.webkitTransitionDuration="0s",this.options.icon&&this.applicationIcon&&(this.element.className+=" ath-icon",this.img=b.createElement("img"),this.img.className="ath-application-icon",this.img.addEventListener("load",this,!1),this.img.addEventListener("error",this,!1),this.img.src=this.applicationIcon.href,this.element.appendChild(this.img)),this.element.innerHTML+=h,this.viewport.style.left="-99999em",this.viewport.appendChild(this.element),this.container.appendChild(this.viewport),this.img||this._delayedShow()}},_delayedShow:function(){setTimeout(this._show.bind(this),1e3*this.options.startDelay+500)},_show:function(){var c=this;this.updateViewport(),a.addEventListener("resize",this,!1),a.addEventListener("scroll",this,!1),a.addEventListener("orientationchange",this,!1),this.options.modal&&b.addEventListener("touchmove",this,!0),this.options.mandatory||setTimeout(function(){c.element.addEventListener("click",c,!0)},1e3),setTimeout(function(){c.element.style.webkitTransform="translate3d(0,0,0)",c.element.style.webkitTransitionDuration="1.2s"},0),this.options.lifespan&&(this.removeTimer=setTimeout(this.remove.bind(this),1e3*this.options.lifespan)),this.options.onShow&&this.options.onShow.call(this)},remove:function(){clearTimeout(this.removeTimer),this.img&&(this.img.removeEventListener("load",this,!1),this.img.removeEventListener("error",this,!1)),a.removeEventListener("resize",this,!1),a.removeEventListener("scroll",this,!1),a.removeEventListener("orientationchange",this,!1),b.removeEventListener("touchmove",this,!0),this.element.removeEventListener("click",this,!0),this.element.addEventListener("transitionend",this,!1),this.element.addEventListener("webkitTransitionEnd",this,!1),this.element.addEventListener("MSTransitionEnd",this,!1),this.element.style.webkitTransitionDuration="0.3s",this.element.style.opacity="0"},_removeElements:function(){this.element.removeEventListener("transitionend",this,!1),this.element.removeEventListener("webkitTransitionEnd",this,!1),this.element.removeEventListener("MSTransitionEnd",this,!1),this.container.removeChild(this.viewport),this.shown=!1,this.options.onRemove&&this.options.onRemove.call(this)},updateViewport:function(){if(this.shown){this.viewport.style.width=a.innerWidth+"px",this.viewport.style.height=a.innerHeight+"px",this.viewport.style.left=a.scrollX+"px",this.viewport.style.top=a.scrollY+"px";var c=b.documentElement.clientWidth;this.orientation=c>b.documentElement.clientHeight?"landscape":"portrait";var e="ios"==d.OS?"portrait"==this.orientation?screen.width:screen.height:screen.width;this.scale=screen.width>c?1:e/a.innerWidth,this.element.style.fontSize=this.options.fontSize/this.scale+"px"}},resize:function(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(this.updateViewport.bind(this),100)},updateSession:function(){d.hasLocalStorage!==!1&&localStorage.setItem(this.options.appID,JSON.stringify(this.session))},clearSession:function(){this.session=m,this.updateSession()},optOut:function(){this.session.optedout=!0,this.updateSession()},optIn:function(){this.session.optedout=!1,this.updateSession()},clearDisplayCount:function(){this.session.displayCount=0,this.updateSession()},_preventDefault:function(a){a.preventDefault(),a.stopPropagation()}},a.addToHomescreen=d}(window,document),window.addEventListener?(window.addEventListener("load",makeImagesResponsive,!1),window.addEventListener("resize",makeImagesResponsive,!1)):(window.attachEvent("onload",makeImagesResponsive),window.attachEvent("onresize",makeImagesResponsive)),_this={init:!0,project:"Dove",animDurationNorm:.5,animDurationFast:.25,animTimeline:new TimelineMax({paused:!0}),mobile:{icon:$("#mobile-icon"),nav:$("#mobile-nav")},sections:{home:{elem:$("#contents.home"),carousel:{id:0,xheight:0,interval:5,intervalId:null},quiz:{id:0,init:!0,results:[],resultsVal:[],resultsFinal:[],resultsNumber:3,arrowPrev:null,arrowNext:null,data:[{question:"How does your<br />hair feel?",dropdown:{title:"",answers:[{val:"2",txt:"Thick"},{val:"1",txt:"Fine"},{val:"3",txt:"Thinning"},{val:"1",txt:"Flat"},{val:"2",txt:"Strong"}]}},{question:"How would you describe<br />your hair condition?",dropdown:{title:"",answers:[{val:"2",txt:"Very dry"},{val:"2",txt:"Dry"},{val:"2-3",txt:"Normal - dry"},{val:"2-3",txt:"Normal"},{val:"2-3",txt:"Normal - greasy"},{val:"1",txt:"Greasy roots with dry ends"},{val:"1",txt:"Very greasy"}]}},{question:"What results would you<br />like to achieve?",dropdown:{title:"",answers:[{val:"1",txt:"Volume and body"},{val:"3",txt:"Thickness and fullness"},{val:"2",txt:"Shine and silkiness"},{val:"1-2-3",txt:"More manageable hair"}]}},{question:"What kind of hair products<br />do you prefer?",dropdown:{title:"",answers:[{val:"2",txt:"I like deep conditioning treatments"},{val:"1",txt:"I like not to weigh my hair down"},{val:"1-2-3",txt:"Anything that helps my blow dry!"},{val:"1-2-3",txt:"I like finishing products"}]}},{question:"Which of the following statements<br />most applies to your hair?",dropdown:{title:"",answers:[{val:"2",txt:"Brittle/breaks easily"},{val:"2",txt:"Tangles after washing"},{val:"2",txt:"Frizzy or flyaway"},{val:"1-2-3",txt:"Damaged"},{val:"3",txt:"Greying"},{val:"3",txt:"Thinning"},{val:"2",txt:"Dull and lifeless"},{val:"2",txt:"Split ends"},{val:"1",txt:"Flat"},{val:"1-2-3",txt:"Colour fade"},{val:"1-2-3",txt:"Unmanageable"}]}}]},vids:[{id:3629228093001,title:"Watch now to discover<br />The Expert Verdict",copy:"From the catwalk to the red carpet, with countless glossy magazine shoots in between, Tracie Cant is one of the industryâ€™s most sought-after hair stylists. See what she had to say about the new Dove Advanced Hair Series range."},{id:3629223844001,title:"Watch now to achieve<br />Perfect Blow Dry",copy:"Tracie Cant teaches, how to achieve the perfect blow dry adding volume from the roots to fine, flat hair."}]},trial:{elem:$("#contents.trial")},buy:{elem:$("#contents.buy")},win:{elem:$("#contents.win")},result:{elem:$("#contents.result"),vids1:[],vids2:[],vids3:[]},prodlinksVisible:!1},video:{id:0,inview:!1,imgpath:null,channel:null,player:{id:"79409503001",key:"AQ~~,AAAACUnXLEE~,CSRrSILcGTe8SeC66Ye7wPnrI5yqPDF_",width:"100%",height:"100%"},xwidth:0,animating:!1}},$(document).ready(function(){function a(){b(),$(window).resize(function(){$(window).width()>816&&($(_this.mobile.icon).removeClass("active"),d()),setTimeout(function(){$(_this.sections.home.elem).length>0&&(_this.sections.home.carousel.xheight=$("#contents.home .carousel").outerHeight()),$(".video-gallery").length>0&&(_this.video.xwidth=$(".video-gallery").outerWidth(),_isTablet&&($(".video-gallery .video-carousel").css({opacity:1}),$(".video-block").hide()))},500)}).resize(),c(),g(),e(),u(),v(),w(),$(window).scroll(function(){var a=$(this).scrollTop(),b=$(document).height()-$(this).height()-a;500>b?$("#backTotop").fadeIn():$("#backTotop").fadeOut(),$("#mobile-nav").is(":visible"),f()}).scroll(),_this.init=!1}function b(){var a=addToHomescreen,b={samsungAndroid:"Custom message for Samsung Android. Click the menu hardware button. This is an icon if needed: %icon",stockAndroid:"Custom message for stock Android. Click the menu hardware button. This is an icon if needed: %icon"},c=window.navigator.userAgent;a.isAndroidBrowser=c.indexOf("Android")>-1&&!/Chrome\/[.0-9]*/.test(c),a.isCompatible=a.isCompatible||a.isAndroidBrowser,"unsupported"==a.OS&&a.isAndroidBrowser&&(a.OS=/ (GT-I9|GT-P7|SM-T2|GT-P5|GT-P3|SCH-I8)/.test(c)?"samsungAndroid":"stockAndroid"),a({message:a.OS in b?b[a.OS]:""})}function c(){$(_this.mobile.icon).click(function(){$(_this.mobile.nav).is(":hidden")?($(this).addClass("active"),d(!0),dataLayer.push({event:"btnclick",eventLabel:"Mobile navigation show"})):($(this).removeClass("active"),d(),dataLayer.push({event:"btnclick",eventLabel:"Mobile navigation hide"}))}),$("#backTotop").click(function(){_utils.scrollToElem(),dataLayer.push({event:"btnclick",eventLabel:"Back to top"})}),_isMobile||"result"!=_thisSection||r()}function d(a){a?(TweenMax.to($("#contents, #footer"),_this.animDurationFast,{css:{right:260}}),$(_this.mobile.nav).show()):$(_this.mobile.nav).is(":visible")&&TweenMax.to($("#contents, #footer"),_this.animDurationFast,{css:{right:0},onComplete:function(){$(_this.mobile.nav).hide()}})}function e(){if($(".video-gallery").length>0){if(""===_thisSubsection)_this.video.imgpath="/images/video_"+_thisSection+"_",_this.video.channel=_this.sections.home.vids;else switch(_this.video.imgpath="/images/video_"+_thisSection+"_"+_thisSubsection+"_",_thisSubsection){case _thisResults[0]:_this.video.channel=_this.sections.result.vids1;break;case _thisResults[1]:_this.video.channel=_this.sections.result.vids2;break;case _thisResults[2]:_this.video.channel=_this.sections.result.vids3}var a=function(){return _this.video.channel[_this.video.id].title},b="";b=_this.video.channel.length>0?"<p>"+a()+"</p>":"<p>Coming soon</p>";var c="";c+='<div class="video-carousel">',c+='<div class="'+(_this.video.channel.length>0?"cursor":"")+" item item"+_this.video.id+'">',c+='<img src="'+_domainName+_this.video.imgpath+_this.video.id+'.jpg" class="resp" />',c+='<div class="overlay">'+b+"</div>",c+="</div>",c+="</div>",_this.video.channel.length>0&&(c+='<div class="video-caption">',c+='<div class="caption">',c+='<div class="arrows">',c+='<img src="'+_domainName+'/images/btn_arrow_prev_2.png" class="cursor arrow prev" />',c+='<img src="'+_domainName+'/images/btn_arrow_next_2.png" class="cursor arrow next" />',c+="</div>",c+="<span>"+_this.video.channel[0].copy+"</span>",c+="</div>",c+="</div>"),c+='<div class="cache">',$.each(_this.video.channel,function(a){c+='<img src="'+_domainName+_this.video.imgpath+a+'.jpg" />'}),c+="</div>",c+='<div class="video-block"><div class="video-container"></div></div>',$(".video-gallery").empty().html(c),$(".video-gallery .video-carousel .item").click(function(){_this.video.channel.length>0&&($(this).parent().css({opacity:0}),s(_this.video.channel[_this.video.id].id),dataLayer.push({event:"btnclick",eventLabel:"Video play "+(_this.video.id+1)}))}),$(".video-gallery .prev, .video-gallery .next").click(function(){if(!_this.video.animating){var b=$(".video-gallery .video-carousel");$(b).css({opacity:1});var c,d=0;$(this).hasClass("prev")?(c=_this.video.xwidth,d=-_this.video.xwidth):(c=-_this.video.xwidth,d=_this.video.xwidth);var e=$(b).find(".item"+_this.video.id);TweenMax.to($(e),_this.animDurationFast,{css:{left:c},ease:Linear.easeNone,onComplete:function(){$(e).remove(),_this.video.animating=!1}}),$(this).hasClass("prev")?(_this.video.id>0?_this.video.id--:_this.video.id=_this.video.channel.length-1,dataLayer.push({event:"btnclick",eventLabel:"Video prev "+(_this.video.id+1)})):(_this.video.id<_this.video.channel.length-1?_this.video.id++:_this.video.id=0,dataLayer.push({event:"btnclick",eventLabel:"Video next "+(_this.video.id+1)}));var f="";f+='<div class="'+(_this.video.channel.length>0?"cursor":"")+" item item"+_this.video.id+'" style="left:'+d+'px;">',f+='<img src="'+_domainName+_this.video.imgpath+_this.video.id+'.jpg" class="resp" />',f+='<div class="overlay"><p>'+a()+"</p></div>",f+="</div>",$(this).hasClass("prev")?$(b).prepend(f):$(b).append(f),TweenMax.to($(b).find(".item"+_this.video.id),_this.animDurationFast,{css:{left:0},ease:Linear.easeNone}),$(".video-block").hide(),$(".video-container").empty(),$(".video-gallery .video-carousel .item").click(function(){_this.video.channel.length>0&&($(this).parent().css({opacity:0}),s(_this.video.channel[_this.video.id].id),dataLayer.push({event:"btnclick",eventLabel:"Video play "+(_this.video.id+1)}))}),$(".video-gallery .video-caption .caption span").empty().html(_this.video.channel[_this.video.id].copy)}_this.video.animating=!0})}}function f(){!_isMobile&&$(".video-gallery").length>0&&(_utils.scrollIntoView($(".video-gallery"))?(!_this.video.inview&&$(".video-container").is(":empty")&&_this.video.channel.length>0&&s(_this.video.channel[_this.video.id].id),_this.video.inview=!0):_this.video.inview=!1)}function g(){$(_this.sections.home.elem).length>0&&(""!==window.location.hash&&_utils.scrollToElem(window.location.hash),h(),k())}function h(){var a="";$.each($(_this.sections.home.elem).find(".carousel ul.clist .info"),function(){a+="<li></li>"}),$(_this.sections.home.elem).find(".carousel .bullets").html("<ul>"+a+"</ul>"),$(_this.sections.home.elem).find(".carousel .bullets li").click(function(){TweenMax.isTweening($(_this.sections.home.elem).find(".carousel ul.clist li"))||(_this.sections.home.carousel.id=$(this).index(),i(),dataLayer.push({event:"btnclick",eventLabel:"Home carousel "+(_this.sections.home.carousel.id+1)}))}),i()}function i(){clearInterval(_this.sections.home.carousel.intervalId),$(_this.sections.home.elem).find(".carousel .bullets li").removeClass("active").eq(_this.sections.home.carousel.id).addClass("active"),_this.init?j():_isMobile?$(_this.sections.home.elem).find(".carousel ul.clist li").css({"z-index":0,display:"none"}).eq(_this.sections.home.carousel.id).css({"z-index":1}).fadeIn(function(){j()}):($(_this.sections.home.elem).find(".carousel ul.clist li").css({"z-index":0,position:"relative",top:0,display:"none"}).eq(_this.sections.home.carousel.id).css({"z-index":1,top:-_this.sections.home.carousel.xheight,display:"block"}),TweenMax.to($(_this.sections.home.elem).find(".carousel ul.clist li").eq(_this.sections.home.carousel.id),_this.animDurationNorm,{css:{top:0},onComplete:j}))}function j(){_this.sections.home.carousel.intervalId=setInterval(function(){_this.sections.home.carousel.id<$(_this.sections.home.elem).find(".carousel ul.clist li").length-1?_this.sections.home.carousel.id++:_this.sections.home.carousel.id=0,i()},1e3*_this.sections.home.carousel.interval)}function k(){var a=$(_this.sections.home.elem).find("#hairconsultation");$(a).find(".btn").click(function(a){a.preventDefault(),l(),dataLayer.push({event:"btnquiz",eventLabel:"Discover now"})})}function l(){var a="";a+='<div class="progress"><div class="top"></div></div>',a+='<div class="counter">Question <span></span> of 5</div>',a+='<div class="question"><p></p></div>',a+='<div class="thumb"><img src="'+_domainName+'/images/home_question_pic1.png" /></div>',a+='<div class="answers"></div>',a+='<div class="progress"><div class="bot"></div></div>',a+='<div class="cursor arrow prev"><img src="'+_domainName+'/images/btn_arrow_prev.png" /><span>Prev</span></div>',a+='<div class="cursor arrow next"><img src="'+_domainName+'/images/btn_arrow_next.png" /><span>Next</span></div>',a+='<div class="spacer"></div>',a+='<div class="cache">',a+='<img src="'+_domainName+'/images/home_question_result1.png" />',a+='<img src="'+_domainName+'/images/home_question_result2.png" />',a+='<img src="'+_domainName+'/images/home_question_result3.png" />',a+="</div>",$(_this.sections.home.elem).find("#hairconsultation .container").empty().html(a),_this.sections.home.quiz.arrowPrev=$(_this.sections.home.elem).find("#hairconsultation .arrow.prev"),_this.sections.home.quiz.arrowNext=$(_this.sections.home.elem).find("#hairconsultation .arrow.next"),$(_this.sections.home.quiz.arrowPrev).click(function(){_this.sections.home.quiz.id>0&&(_this.sections.home.quiz.id--,dataLayer.push({event:"btnquiz",eventLabel:"Quiz prev "+(_this.sections.home.quiz.id+1)})),n()}),$(_this.sections.home.quiz.arrowNext).click(function(){_this.sections.home.quiz.id==_this.sections.home.quiz.data.length-1?q():(_this.sections.home.quiz.id<_this.sections.home.quiz.data.length-1&&(_this.sections.home.quiz.id++,dataLayer.push({event:"btnquiz",eventLabel:"Quiz next "+(_this.sections.home.quiz.id+1)})),n())});for(var b=0;15>b;b++)_this.sections.home.quiz.results[b]="";m(),_this.sections.home.quiz.init=!1}function m(){$(_this.sections.home.elem).find("#hairconsultation .counter span").empty().html(_this.sections.home.quiz.id+1);var a=_this.sections.home.quiz.data[_this.sections.home.quiz.id].question;$(_this.sections.home.elem).find("#hairconsultation .question p").empty().html(a);var b="",c="",d="";b+='<option value="">Please select your answer</option>',$.each(_this.sections.home.quiz.data[_this.sections.home.quiz.id].dropdown.answers,function(a,e){b+=p(1)==a+1?'<option value="'+e.val+'" selected>'+e.txt+"</option>":'<option value="'+e.val+'">'+e.txt+"</option>",5>a?c+='<li class="cursor" data-id="'+(a+_this.sections.home.quiz.data.length)+'" data-val="'+e.val+'"><div class="checkbox"></div><p>'+e.txt+"</p></li>":d+='<li class="cursor" data-id="'+(a+_this.sections.home.quiz.data.length)+'" data-val="'+e.val+'"><div class="checkbox"></div><p>'+e.txt+"</p></li>"}),_this.sections.home.quiz.id<1||$(_this.sections.home.quiz.arrowPrev).show(),_this.sections.home.quiz.id==o()||$(_this.sections.home.quiz.arrowNext).show(),_this.sections.home.quiz.id==_this.sections.home.quiz.data.length-1?($(_this.sections.home.quiz.arrowNext).find("span").html("Result"),$(_this.sections.home.elem).find("#hairconsultation .answers").removeClass("dropdown").addClass("multichoice").empty().html('<div class="mcrow"><div class="mccol mccol1"><ul>'+c+'</ul></div><div class="mccol mccol2"><ul>'+d+"</ul></div></div>"),$(_this.sections.home.elem).find("#hairconsultation .answers.multichoice li .checkbox").removeClass("active"),$.each(_this.sections.home.quiz.results,function(a,b){if(a+1>_this.sections.home.quiz.data.length-1){var c=String(b).split("/");c[0]==a+1&&$(_this.sections.home.elem).find("#hairconsultation .answers.multichoice li").eq(a-(_this.sections.home.quiz.data.length-1)).find(".checkbox").addClass("active")}}),$(_this.sections.home.elem).find("#hairconsultation .answers.multichoice li").click(function(){if($(this).find(".checkbox").hasClass("active"))$(this).find(".checkbox").removeClass("active"),_this.sections.home.quiz.results[$(this).data("id")-1]="",o()<_this.sections.home.quiz.data.length&&$(_this.sections.home.quiz.arrowNext).hide();else{var a="Quiz answer5 - "+_this.sections.home.quiz.data[_this.sections.home.quiz.id].dropdown.answers[$(this).data("id")-_this.sections.home.quiz.data.length].txt;dataLayer.push({event:"btnquiz",eventLabel:a}),$(this).find(".checkbox").addClass("active"),_this.sections.home.quiz.results[$(this).data("id")-1]=$(this).data("id")+"/"+$(this).data("val"),$(_this.sections.home.quiz.arrowNext).show()}})):($(_this.sections.home.quiz.arrowNext).find("span").html("Next"),$(_this.sections.home.elem).find("#hairconsultation .answers").removeClass("multichoice").addClass("dropdown").empty().html("<select>"+b+"</select>"),$(_this.sections.home.elem).find("#hairconsultation .answers.dropdown select").change(function(){if($(this)[0].selectedIndex>0){var a="Quiz answer"+(_this.sections.home.quiz.id+1)+" - "+_this.sections.home.quiz.data[_this.sections.home.quiz.id].dropdown.answers[$(this)[0].selectedIndex-1].txt;dataLayer.push({event:"btnquiz",eventLabel:a}),_this.sections.home.quiz.results[_this.sections.home.quiz.id]=$(this)[0].selectedIndex+"/"+$(this).val(),$(_this.sections.home.quiz.arrowNext).show()}else $(_this.sections.home.quiz.arrowNext).hide()}))}function n(){TweenMax.to($(_this.sections.home.elem).find("#hairconsultation .progress .top, #hairconsultation .progress .bot"),_this.animDurationFast,{width:20*(_this.sections.home.quiz.id+1)+"%"}),$(_this.sections.home.elem).find("#hairconsultation .thumb img").attr("src",_domainName+"/images/home_question_pic"+(_this.sections.home.quiz.id+1)+".png"),TweenMax.to($(_this.sections.home.elem).find("#hairconsultation .thumb img"),_this.animDurationFast,{scale:1.3,repeat:1,yoyo:!0}),$(_this.sections.home.quiz.arrowPrev).hide(),$(_this.sections.home.quiz.arrowNext).hide();var a=$(_this.sections.home.elem).find("#hairconsultation .question p, #hairconsultation .answers select, #hairconsultation .answers .mccol");TweenMax.to(a,_this.animDurationFast,{autoAlpha:0,onComplete:function(){m(),TweenMax.to(a,_this.animDurationNorm,{autoAlpha:1})}})}function o(){var a=0;return $.each(_this.sections.home.quiz.results,function(b,c){""!==c&&a++}),a}function p(a){var b=String(_this.sections.home.quiz.results[_this.sections.home.quiz.id]).split("/");return a?b[0]:b[1]}function q(){$.each(_this.sections.home.quiz.results,function(a,b){if(""!==b){var c=String(b).split("/");if(c[1].length>1){var d=String(c[1]).split("-");$.each(d,function(a,b){_this.sections.home.quiz.resultsVal.push(b)})}else _this.sections.home.quiz.resultsVal.push(c[1])}});for(var a=1;a<=_this.sections.home.quiz.resultsNumber;a++)_this.sections.home.quiz.resultsFinal.push({group:a,value:_utils.arrayCountValues(_this.sections.home.quiz.resultsVal,a)});_this.sections.home.quiz.resultsFinal.sort(_utils.arraySortDescending);var b;b=_this.sections.home.quiz.resultsFinal[0].value==_this.sections.home.quiz.resultsFinal[1].value&&_this.sections.home.quiz.resultsFinal[0].value==_this.sections.home.quiz.resultsFinal[2].value?_utils.randomNum(1,3):_this.sections.home.quiz.resultsFinal[0].value==_this.sections.home.quiz.resultsFinal[1].value?_utils.randomNum(1,2):1;var c=_this.sections.home.quiz.resultsFinal[b-1].group;$(_this.sections.home.elem).find("#hairconsultation").addClass("res"+c);var d=_thisResults[c-1].replace("-"," "),e="";e+="<p>The perfect range for you</p>",e+="<h2>"+d+"</h2>",e+='<div class="btn cursor"><a href="'+t("result/"+_thisResults[c-1])+'/fromQuiz">Find out more</a></div>',e+='<div class="image"><img src="'+_domainName+"/images/home_question_result"+c+'.png" class="resp" /></div>',$(_this.sections.home.elem).find("#hairconsultation .container").empty().html(e),dataLayer.push({event:"btnquiz",eventLabel:"Quiz result - "+d}),setTimeout(function(){_utils.scrollToElem("#hairconsultation")},500)}function r(){var a=new ScrollMagic({globalSceneOptions:{triggerHook:"onLeave"}}),b=new TimelineMax;b.add(TweenMax.to(".row4",1.5,{opacity:1,transform:"translateY(0)"})),b.add(TweenMax.to(".row5",1.5,{opacity:1,transform:"translateY(0)"})),b.add(TweenMax.to(".row6",1.5,{opacity:1,transform:"translateY(0)"})),b.add(TweenMax.to(".row7",1.5,{opacity:1,transform:"translateY(0)"})),new ScrollScene({triggerElement:"#trigger",duration:5e3}).setTween(b).setPin("#pin").addTo(a)
}function s(a){$(".video-block").show(),$(".video-container").empty().html('<div style="display:none"></div><object id="myExperience'+a+'" class="BrightcoveExperience"><param name="bgcolor" value="#000000" /><param name="width" value="'+_this.video.player.width+'" /><param name="height" value="'+_this.video.player.height+'" /><param name="playerID" value="'+_this.video.player.id+'" /><param name="playerKey" value="'+_this.video.player.key+'" /><param name="isVid" value="true" /><param name="isUI" value="true" /><param name="dynamicStreaming" value="true" /><param name="autoStart" value="true" /><param name="includeAPI" value="true" /><param name="templateLoadHandler" value="onTemplateLoaded" /><param name="templateReadyHandler" value="onTemplateReady" /><param name="@videoPlayer" value="'+a+'" /></object><script type="text/javascript">brightcove.createExperiences();</script>')}function t(a){var b=a.split("/"),c=b[0],d=b[1],e=b[2];return _isRewrite?"/"+c+(d?"/"+d:"")+(e?"/"+e:""):"?sec="+c+(d?"sub="+d:"")+(e?"sid="+e:"")}function u(){if($(_this.sections.buy.elem).length>0||$(_this.sections.result.elem).length>0){var a;$(_this.sections.buy.elem).length>0&&(a=_this.sections.buy.elem),$(_this.sections.result.elem).length>0&&(a=_this.sections.result.elem);var b=function(){$.each($(a).find(".copy, .info"),function(){$(this).find(".arrow").removeClass("active"),$(this).find(".prodlinks .icons").slideUp(function(){$(this).parent().hide()})})};$.each($(a).find(".btnprod"),function(a,c){$(c).click(function(a){if(a.preventDefault(),$(this).find(".arrow").hasClass("active"))$(this).find(".arrow").removeClass("active"),$(this).parent().find(".prodlinks .icons").slideUp(function(){$(this).parent().hide()}),_this.sections.prodlinksVisible=!1;else{var c=_this.sections.prodlinksVisible?500:0;_this.sections.prodlinksVisible&&b(),$(this).find(".arrow").addClass("active"),$(this).parent().find(".prodlinks").delay(c).show(),$(this).parent().find(".prodlinks .icons").delay(c).slideDown(),_this.sections.prodlinksVisible=!0}})})}}function v(){$(_this.sections.trial.elem).length>0&&(""!==window.location.hash&&y(),$(_this.sections.trial.elem).find(".row1 .textleft").click(function(){y(),dataLayer.push({event:"btnclick",eventLabel:"Claim your free sample"})}),x($(_this.sections.trial.elem)))}function w(){$(_this.sections.win.elem).length>0&&(""!==window.location.hash&&y(),$(_this.sections.win.elem).find(".row1 .textleft").click(function(){y(),dataLayer.push({event:"btnclick",eventLabel:"Enter competition"})}),x($(_this.sections.win.elem)))}function x(a){var b="INVALID EMAIL ADDRESS",c="INVALID PHONE NUMBERS",d=$(a).find("#theform"),e=$(d).find("input[name=uFirstname]"),f=$(d).find("input[name=uSurname]"),g=$(d).find("input[name=uAddress1]"),h=$(d).find("input[name=uAddress2]"),i=$(d).find("input[name=uPostcode]"),j=$(d).find("select[name=uCountry]"),k=$(d).find("input[name=uEmail]"),l=$(d).find("input[name=uPhone]"),m=$(d).find("input[name=uOptin1]"),n=$(d).find("input[name=uOptin2]");k.removeClass("formErrorField").focus(function(){$(this).val("")}),l.removeClass("formErrorField").focus(function(){$(this).val("")});var o=function(a){if(!($(d).find(".formErrorDisplay").length>0)){var b='<div class="formErrorDisplay">'+a+"</div>";$(b).insertBefore($(d).find(".form .tandc")),TweenMax.from($(d).find(".form .formErrorDisplay"),_this.animDurationNorm,{opacity:0,onComplete:function(){TweenMax.delayedCall(2,function(){$(d).find(".form .formErrorDisplay").remove()})}})}};$(d).find(".btn.submit").click(function(p){if(p.preventDefault(),""===e.val())return e.addClass("formErrorField"),o("Enter your firstname"),!1;if(e.removeClass("formErrorField"),""===f.val())return f.addClass("formErrorField"),o("Enter your surname"),!1;if(f.removeClass("formErrorField"),""===g.val())return g.addClass("formErrorField"),o("Enter your address"),!1;if(g.removeClass("formErrorField"),""===i.val())return i.addClass("formErrorField"),o("Enter your postcode"),!1;if(i.removeClass("formErrorField"),!_utils.isValidEmailAddress(k.val()))return k.val(b).addClass("formErrorField"),o("Enter a valide email address"),!1;if(k.removeClass("formErrorField"),""!==l.val()){if(!_utils.isValidPhoneNumber(l.val()))return l.val(c).addClass("formErrorField"),o("Enter a valide phone numbers"),!1;l.removeClass("formErrorField")}$(d).find(".form").empty().html('<h2 class="formThankyou">Thank you for entering...</h2>');var q=e.val()+"***";q+=f.val()+"***",q+=g.val()+"***",q+=(h.val()?h.val():"-")+"***",q+=i.val()+"***",q+=j.val()+"***",q+=k.val()+"***",q+=(l.val()?l.val():"-")+"***",q+=(m.is(":checked")?"yes":"no")+"***",q+=(n.is(":checked")?"yes":"no")+"***",q+=_utils.timeStamp();var r;$(a).hasClass("trial")&&(r="trial"),$(a).hasClass("win")&&(r="win"),dataLayer.push({event:"btnsubmit",eventAction:r,eventLabel:_utils.base64Encode(q)})})}function y(){_utils.scrollToElem("#theform")}a()}),_utils={base64Encode:function(a){return base64_encode(a)},base64Decode:function(a){return base64_decode(a)},randomNum:function(a,b,c){var d=a+Math.random()*(b-a);return"undefined"==typeof c?Math.round(d):d.toFixed(c)},arrayShuffle:function(a){for(var b,c,d=a.length;d;b=parseInt(Math.random()*d),c=a[--d],a[d]=a[b],a[b]=c);return a},arraySortDescending:function(a,b){return b.value-a.value},arrayCountValues:function(a,b){var c=0;return $.each(a,function(a,d){parseInt(d)===b&&c++}),c},arrayRemoveItem:function(a,b){for(var c=0,d=0;d<a.length;d++)a[d]===b&&(a.splice(d,1),c++,d--);return c},isValidEmailAddress:function(a){var b=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);return b.test(a)},isValidPhoneNumber:function(a){var b=new RegExp(/\(?([0-9]{3})\)?([ .-]?)([0-9]{3})\2([0-9]{4})$/i);return b.test(a)},scrollToElem:function(a){$("html, body").animate({scrollTop:a?$(a).offset().top-70:0},500)},scrollIntoView:function(a){if($(a).length<1)return!1;var b=$(window).scrollTop(),c=b+$(window).height(),d=$(a).offset().top,e=d+$(a).height();return e>=b&&c>=d&&c>=e&&d>=b},timeStamp:function(){var a=new Date,b=a.getDate()+"/"+(a.getMonth()+1)+"/"+a.getFullYear()+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds();return b},oldIE:function(){return-1!=navigator.appVersion.indexOf("MSIE 10.")||-1!=navigator.appVersion.indexOf("MSIE 9.")||-1!=navigator.appVersion.indexOf("MSIE 8.")?!0:!1},ltIE10:function(){return-1!=navigator.appVersion.indexOf("MSIE 9.")||-1!=navigator.appVersion.indexOf("MSIE 8.")?!0:!1}};